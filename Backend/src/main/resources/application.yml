spring:
  application:
    name: projectspring
  
  datasource:
    url: jdbc:postgresql://${DB_HOST:localhost}:${DB_PORT:5432}/${DB_NAME:projectspring}
    username: ${DB_USER:postgres}
    password: ${DB_PASSWORD:postgres}
    driver-class-name: org.postgresql.Driver
  
  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: ${SHOW_SQL:false}
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
  
  liquibase:
    change-log: classpath:db/changelog/db.changelog-master.xml
  
  ldap:
    urls: ${LDAP_URLS:ldap://localhost:389}
    base: ${LDAP_BASE:dc=example,dc=com}
    username: ${LDAP_USERNAME:}
    password: ${LDAP_PASSWORD:}
    user-search-base: ${LDAP_USER_SEARCH_BASE:ou=users}
    user-search-filter: ${LDAP_USER_SEARCH_FILTER:(uid={0})}

auth:
  ldap:
    enabled: ${LDAP_ENABLED:true} # Set to false to disable LDAP and use only local users

server:
  port: ${SERVER_PORT:8080}

jwt:
  secret: ${JWT_SECRET:your-secret-key-change-this-in-production-min-256-bits}
  expiration: ${JWT_EXPIRATION:86400000} # 24 hours in milliseconds

logging:
  level:
    com.projectspring: ${LOG_LEVEL:INFO}
    org.springframework.security: ${SECURITY_LOG_LEVEL:DEBUG}
    com.projectspring.security: DEBUG

app:
  seed:
    sample-data: ${SEED_SAMPLE_DATA:0} # Set to 1 to seed sample data (users, tasks, projects)
  frontend:
    url: ${FRONTEND_URL:http://frontend:80} # Frontend URL for health check (use service name in Docker)
  encryption:
    key: ${ENCRYPTION_KEY:default-encryption-key-change-in-production-min-32-chars} # AES encryption key (min 32 chars)
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:*} # Comma-separated list of allowed origins, or * for all (development only)
  security:
    rate-limit:
      max-attempts: ${RATE_LIMIT_MAX_ATTEMPTS:5} # Maximum login attempts per IP in time window
      window-minutes: ${RATE_LIMIT_WINDOW_MINUTES:15} # Time window in minutes
    account-lockout:
      max-failed-attempts: ${ACCOUNT_LOCKOUT_MAX_ATTEMPTS:10} # Maximum failed attempts before lockout
      lockout-duration-minutes: ${ACCOUNT_LOCKOUT_DURATION_MINUTES:30} # Lockout duration in minutes

